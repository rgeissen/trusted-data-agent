<!DOCTYPE html>
<html>
<head>
    <title>Test Template Edit Modal</title>
    <style>
        body { background: #0f1419; color: #fff; font-family: sans-serif; padding: 20px; }
        button { padding: 10px 20px; font-size: 16px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>Template Edit Modal Test</h1>
    <button onclick="testKnowledgeTemplate()">Test Knowledge Template</button>
    <button onclick="testSQLTemplate()">Test SQL Template</button>
    
    <script type="module">
        // Mock localStorage
        localStorage.setItem('tda_auth_token', 'test-token');
        
        // Mock toast function
        window.showToast = (type, msg) => console.log(`[${type}] ${msg}`);
        window.showNotification = window.showToast;
        
        // Load templates
        const knowledgeTemplate = await fetch('/rag_templates/templates/knowledge-repository-basic/knowledge_repo_v1.json')
            .then(r => r.json());
        const sqlTemplate = await fetch('/rag_templates/templates/sql-query-basic/sql_query_v1.json')
            .then(r => r.json());
            
        console.log('Loaded knowledge template:', knowledgeTemplate);
        console.log('Loaded SQL template:', sqlTemplate);
        
        // Import modal
        const { templateEditModal } = await import('./static/js/handlers/rag/templateEditModal.js');
        
        window.testKnowledgeTemplate = async () => {
            console.log('Opening knowledge template modal...');
            await templateEditModal.open(knowledgeTemplate.template_id, knowledgeTemplate);
        };
        
        window.testSQLTemplate = async () => {
            console.log('Opening SQL template modal...');
            await templateEditModal.open(sqlTemplate.template_id, sqlTemplate);
        };
        
        console.log('Test page loaded successfully');
    </script>
</body>
</html>
